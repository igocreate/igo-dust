(()=>{var e={93:(e,t,s)=>{const{isBrowser:r,isNode:i}=s(545),a=s(128),n=s(221),o=s(129).promises;e.exports.getFilePath=e=>r?(console.error("not implemented for browser"),""):(n.isAbsolute(e)||"."===e[0]||(e=`${a.views}/${e}`),n.resolve(e)),e.exports.loadFile=async e=>r?(console.error("not implemented for browser"),""):await o.readFile(e,"utf8")},128:e=>{e.exports=new class{constructor(){this.cache=!1,this.views="./views",this.htmlencode=!0,this.htmltrim=!0}configure(e){void 0!==e.views&&(this.views=e.views),void 0===e.cache&&void 0===e["view cache"]||(this.cache=!!(e.cache??e["view cache"])),["htmlencode","htmltrim"].forEach(t=>{void 0!==e[t]&&(this[t]=!!e[t])})}}},129:()=>{},140:(e,t,s)=>{const r=s(658),i=s(604),a=/[&<>"']/,n=/&/g,o=/</g,p=/>/g,c=/"/g,l=/'/g,h=/\\/g,u=/\//g,g=/\r/g,f=/\u2028/g,d=/\u2029/g,x=/\n/g,$=/\f/g,m=/'/g,b=/"/g,w=/\t/g,_={h:e=>e&&e.replace&&a.test(e)?e.replace(n,"&amp;").replace(o,"&lt;").replace(p,"&gt;").replace(c,"&quot;").replace(l,"&#39;"):e,j:e=>"string"==typeof e?e.replace(h,"\\\\").replace(u,"\\/").replace(b,'\\"').replace(m,"\\'").replace(g,"\\r").replace(f,"\\u2028").replace(d,"\\u2029").replace(x,"\\n").replace($,"\\f").replace(w,"\\t"):e,u:encodeURI,uc:encodeURIComponent,js:e=>e&&JSON.stringify(e).replace(f,"\\u2028").replace(d,"\\u2029").replace(o,"\\u003c"),jp:JSON.parse,uppercase:e=>e.toUpperCase(),lowercase:e=>e.toLowerCase()},y=(e,t,s)=>{if(!y.helpers||!y.helpers[e])throw new Error(`Error: helper @${e} not found!`);return y.helpers[e](t,s)};y.helpers=i,e.exports={a:e=>Array.isArray(e)?0===e.length?null:e:e?[e]:null,b:e=>!!e&&0!==e.length,v:(e,t,s)=>"function"==typeof e?e.call(t,s):e,d:(e,t,s)=>"function"==typeof e?e.call(t,s):null==e?"":e,h:y,f:_,i:async e=>(e.endsWith(".dust")||(e+=".dust"),await r.getCompiled(e))}},221:()=>{},237:(e,t,s)=>{const r=s(128),i=s(658),a=s(794),n=s(604),o=s(140);e.exports.configure=e=>{r.configure(e)},e.exports.compileFile=async e=>await i.getCompiled(e),e.exports.getSource=async e=>await i.getSource(e),e.exports.render=async(e,t,s=null)=>await(new a).render(e,t,s),e.exports.renderFile=async(e,t,s=null)=>await(new a).renderFile(e,t,s),e.exports.engine=async(t,s,r)=>{try{return r(null,await e.exports.renderFile(t,s))}catch(e){return r(e)}},e.exports.helpers=n,e.exports.filters=o.f},410:e=>{e.exports.cleanStr=e=>{const t=/["]*(.[^"]*)/.exec(e);return t&&t[1]},e.exports.removeComments=e=>{let t,s,r=0;const i=new RegExp("{!","msg"),a=new RegExp("!}","msg");for(;null!==(t=i.exec(e));)for(r=t.index+2,a.lastIndex=r;null!==(s=a.exec(e));){e=e.slice(0,t.index)+e.slice(s.index+2);break}return e},e.exports.stripDoubleQuotes=e=>{const t=new RegExp('"',"sg");return e.replace(t,"")},e.exports.parseTag=e=>{const t=e.indexOf(" ");return t>=0&&(e=e.substring(0,t)),e.substring(1)};const t=["'","{","["];e.exports.parseParams=e=>{const s={},r=e;let i;const a=new RegExp('(\\w+)=("[^"]*")',"msg");for(;null!==(i=a.exec(e));)s[i[1]]=i[2],e=e.substring(0,i.index)+e.substring(a.lastIndex),a.lastIndex=i.index;const n=new RegExp('(\\w+)=([^" \n\r]+)',"msg");for(;null!==(i=n.exec(e));){if(t.indexOf(i[2][0])>=0)throw new Error(`Unexpected character "${i[2][0]}" in tag {${r}...`);s[i[1]]=i[2],e=e.substring(0,i.index)+e.substring(n.lastIndex),n.lastIndex=i.index}return null!==(i=new RegExp('[^=] ?("[^"]*")',"msg").exec(e))&&(s.$=i[1]),s}},545:(e,t)=>{const s="undefined"!=typeof window&&void 0!==window.document,r="object"==typeof self&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,i="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node;e.exports={isBrowser:s,isWebWorker:r,isNode:i,isJsDom:()=>"undefined"!=typeof navigator&&("undefined"!=typeof window&&"nodejs"===window.name||navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"))}},604:e=>{const t=(e,t)=>(e,s)=>t(e.key,e.value);e.exports={eq:t(0,(e,t)=>e===t),ne:t(0,(e,t)=>e!==t),lt:t(0,(e,t)=>Number(e)<Number(t)),lte:t(0,(e,t)=>Number(e)<=Number(t)),gt:t(0,(e,t)=>Number(e)>Number(t)),gte:t(0,(e,t)=>Number(e)>=Number(t)),first:(e,t)=>0===t.$idx,last:(e,t)=>t.$length&&t.$length-1===t.$idx,sep:(e,t)=>t.$length&&t.$length-1!==t.$idx,select:()=>console.log("Error : @select not supported !")}},658:(e,t,s)=>{const r=s(93),i=s(813),a=s(869),n=s(128);e.exports=new class{constructor(){this._CACHE={}}async _getOrSet(e,t,s){const i=`${t}:${e=r.getFilePath(e)}`;if(n.cache&&this._CACHE[i])return this._CACHE[i];const a=await s(e);return n.cache&&(this._CACHE[i]=a),a}async _getParsed(e){return this._getOrSet(e,"parsed",async e=>{const t=await r.loadFile(e);return(new i).parse(t)})}async getCompiled(e){return this._getOrSet(e,"compiled",async e=>{const t=await this._getParsed(e);return(new a).compile(t)})}async getSource(e){return this._getOrSet(e,"source",async e=>{const t=await this._getParsed(e);return(new a).toSource(t)})}}},794:(e,t,s)=>{const r=s(140),i=s(658),a=s(813),n=s(869);e.exports=class{async render(e,t,s){const r=(new a).parse(e),i=(new n).compile(r);return await this.renderCompiled(i,t,s)}async renderFile(e,t,s){const r=await i.getCompiled(e);return await this.renderCompiled(r,t,s)}async renderCompiled(e,t,s){return await e(t,r,null,s)}}},807:e=>{const t=["else"],s={s:" ",n:"\\n",r:"\\r\\n",lb:"{",rb:"}"},r={"?":(e,t)=>{e.pushBlock(t),e.stackBlock(t)},"#":(e,t)=>{e.pushBlock(t),t.selfClosedTag||e.stackBlock(t)},"^":(e,t)=>{e.pushBlock(t),e.stackBlock(t)},"@":(e,t)=>{e.pushBlock(t),t.selfClosedTag||e.stackBlock(t)},":":(e,s)=>{if(-1===t.indexOf(s.tag))throw new Error(`Unexpected tag {${s.type}${s.tag}..`);e.addBody(s.tag)},"/":(e,t)=>{const s=e.pop();s&&">"!==s.type&&s.tag!==t.tag&&console.error(`Open/close tag mismatch! '${s.tag}' <> '${t.tag}'`)},">":(e,t)=>{t.file=t.params.$,e.pushBlock(t),t.selfClosedTag||e.stackBlock(t)},"<":(e,t)=>{e.pushBlock(t),e.stackBlock(t)},"+":(e,t)=>{e.pushBlock(t),t.selfClosedTag||e.stackBlock(t)},"~":(e,t)=>{s[t.tag]&&e.pushBlock(s[t.tag])}};e.exports=r},813:(e,t,s)=>{const r=s(410),i=s(807),a=s(128);class n{static OPEN_REGEXP=new RegExp("(.*?)\\{","msg");static CLOSE_REGEXP=new RegExp("(.*?)\\}","msg");constructor(){this.global=[],this.buffer=this.global,this.stack=[],this.contents={}}pushString(e){a.htmltrim&&(e=(e=e.replace(/[\r\n]+\s*/g,"")).replace(/\\/g,"\\\\")),e=e.replace(/'/g,"\\'");const t=this.buffer.length-1,s=this.buffer[t];"string"!=typeof s?this.buffer.push(e):this.buffer[t]=s+e}pushBlock(e){this.buffer.push(e)}stackBlock(e){e.buffer=[],e.current=e.buffer,this.buffer=e.buffer,this.stack.push(e)}getLastBlock(){return this.stack[this.stack.length-1]}pop(){const e=this.stack.pop(),t=this.getLastBlock();return this.buffer=t&&t.current||this.global,e}addBody(e){const t=this.getLastBlock();if(!t)throw new Error("Cannot add body outside of a block");t.bodies=t.bodies||{},t.bodies[e]=[],t.current=t.bodies[e],this.buffer=t.bodies[e]}parse(e){e=a.htmltrim?e.replace(/^\s+/g,""):e.replace(/\r/g,"\\r").replace(/\n/g,"\\n"),e=r.removeComments(e);const t=n.OPEN_REGEXP,s=n.CLOSE_REGEXP;t.lastIndex=0,s.lastIndex=0;let i,o,p=0;for(;null!==(i=t.exec(e));){i[1]&&this.pushString(i[1]),p=i.index+i[0].length;let r="";for(s.lastIndex=p;null!==(o=s.exec(e))&&(r+=o[1],-1!==o[1].lastIndexOf("{"));)r+="}";if(!o)throw new Error(`Missing closing "}" at index ${p}`);p=o.index+o[0].length,t.lastIndex=p,this.parseTag(r)||this.pushString(`{${r}}`)}if(this.stack.length>0)throw new Error(`Missing closing tag for {${this.stack[0].type}${this.stack[0].tag}...`);return p<e.length&&this.pushString(e.slice(p)),this.global}parseTag(e){const t=i[e[0]],s={type:e[0],tag:e};return t?(e.endsWith("/")&&(s.selfClosedTag=!0,e=e.substring(0,e.length-1)),s.tag=r.parseTag(e),s.params=r.parseParams(e),t(this,s),!0):!(e.indexOf(" ")>=0||e.indexOf("(")>=0||e.indexOf(";")>=0||(s.type="r",this.parseFilters(e,s),this.pushBlock(s),0))}parseFilters(e,t){const s=new RegExp("([ ]*\\|[ ]*\\w+)+","g").exec(e);if(s){t.tag=e.substring(0,s.index);const r=s[0].replace(/ /g,"").substring(1).split("|"),i=r.indexOf("s");i>-1?r.splice(i,1):a.htmlencode&&r.push("h"),t.f=r}else a.htmlencode&&(t.f=["h"])}}e.exports=n},869:(e,t,s)=>{const r=s(410),i=Object.getPrototypeOf(async function(){}).constructor;e.exports=class{constructor(){this.i=0,this.parts=[],this.parts.push("var r='',l=l||{},c=c||{ctx:[]};"),this.parts.push("var a=s?function(x){s.write(String(x))}:function(x){r+=x};")}compileBuffer(e){e.forEach(e=>{"<"===e.type&&(this.parts.push(`c._${e.tag}=async function(){var r='';`),this.parts.push("var a=s?function(x){s.write(String(x))}:function(x){r+=x};"),this.compileBuffer(e.buffer),this.parts.push("return r;};"))}),e.forEach(e=>{if("r"===e.type)this.parts.push(`a(${this._getReference(e)});`);else if("+"!==e.type||e.tag)if("+"===e.type)this.parts.push(`if(c._${e.tag}){a(await c._${e.tag}())}`),e.buffer&&(this.parts.push("else{"),this.compileBuffer(e.buffer),this.parts.push("}"));else if("?"===e.type||"^"===e.type){const t="^"===e.type?"!":"";this._pushContext(e.params),this.parts.push(`if(${t}u.b(${this._getValue(e.tag)})){`),this.compileBuffer(e.buffer),this.parts.push("}"),this._else(e),this._popContext(e.params)}else if("#"===e.type){this.i=this.i+1;const{i:t}=this;if(this._pushContext(e.params,!0),this.parts.push(`var a${t}=u.a(${this._getValue(e.tag)});`),this.parts.push(`if(a${t}){`),e.buffer){const s=e.params.it&&r.stripDoubleQuotes(e.params.it);this.parts.push(`l.$length=a${t}.length;`),this.parts.push(`for(var i${t}=0;i${t}<a${t}.length;i${t}++){`),s&&this.parts.push(`l.${s}=a${t}[i${t}];`),this.parts.push(`l._it=a${t}[i${t}];`),this.parts.push(`l.$idx=i${t};`),this.compileBuffer(e.buffer,!0),this.parts.push("}")}else this.parts.push(`a(a${t})`);this.parts.push("}"),this._else(e),this._popContext(e.params,!0)}else if("@"===e.type){this.i=this.i+1;const{i:t}=this;this.parts.push(`var h${t}=u.h('${e.tag}',${this._getParams(e.params)},l);`),this.parts.push(`if(h${t}){`),e.buffer?this.compileBuffer(e.buffer):this.parts.push(`a(h${t});`),this.parts.push("}"),this._else(e)}else if(">"===e.type){e.buffer&&(this.parts.push("c._$body=async function(){var r='';"),this.parts.push("var a=s?function(x){s.write(String(x))}:function(x){r+=x};"),this.compileBuffer(e.buffer),this.parts.push("return r;};")),this._pushContext(e.params);const t=this._getParam(e.file);this.parts.push(`a(await (await u.i(${t}))(l,u,c,s));`),this._popContext(e.params)}else e.type||this.parts.push(`a('${e}');`);else this.parts.push("if(c._$body){a(await c._$body());c._$body=null;}")})}toSource(e){return this.compileBuffer(e),this.parts.push("return r;"),this.parts.join("")}compile(e){const t=this.toSource(e);return new i("l","u","c","s",t)}_else(e){e.bodies&&e.bodies.else&&(this.parts.push("else{"),this.compileBuffer(e.bodies.else),this.parts.push("}"))}_pushContext(e,t){const{i:s}=this;this.parts.push(`var ctx${s}={};`),Object.keys(e).forEach(t=>{"$"!==t&&(this.parts.push(`ctx${s}.${t}=l.${t};`),this.parts.push(`l.${t}=${this._getParam(e[t])};`))}),t&&(this.parts.push(`ctx${s}._it=l._it;`),this.parts.push(`ctx${s}.idx=l.$idx;`),this.parts.push(`ctx${s}.length=l.$length;`)),this.parts.push(`c.ctx.push(ctx${s});`)}_popContext(e,t){const{i:s}=this;this.parts.push(`var p_ctx${s}=c.ctx.pop();`),Object.keys(e).forEach(e=>{"$"!==e&&this.parts.push(`l.${e}=p_ctx${s}.${e};`)}),t&&(this.parts.push(`l._it=p_ctx${s}._it;`),this.parts.push(`l.$idx=p_ctx${s}.idx;`),this.parts.push(`l.$length=p_ctx${s}.length;`))}_addParamsToLocals(e){const{i:t}=this;Object.keys(e).forEach(s=>{"$"!==s&&(this.parts.push(`c.p_${s}${t}=l.${s};`),this.parts.push(`l.${s}=${this._getParam(e[s])};`))})}_cleanParamsFromLocals(e){const{i:t}=this;Object.keys(e).forEach(e=>{"$"!==e&&(this.parts.push(`l.${e}=c.p_${e}${t};`),this.parts.push(`delete c.p_${e}${t};`))})}_getParam(e){if('"'===e[0]){let t,s,i=[],a=0;if(!(e=r.stripDoubleQuotes(e)))return"''";const n=new RegExp("\\{([^\\}]*)\\}","msg");for(;null!==(t=n.exec(e));)s=e.substring(a,t.index).replace(/'/g,"\\'"),i.push(`'${s}'`),a=t.index+t[0].length,i.push(this._getValue(t[1],"u.d"));return a<e.length&&(s=e.substring(a,e.length),s=s.replace(/'/g,"\\'"),i.push(`'${s}'`)),i.join("+")}return isNaN(e)?this._getValue(e):e}_getValue(e,t="u.v"){if(!isNaN(e))return e;if("."===e)return"l._it";"."===e[0]&&(e="_it"+e);const s=[];let r,i,a=!1,n=0;for(r=0;r<e.length;r=1+r)i=e[r],a||"."!==i&&"["!==i?"]"===i&&(s.push("["+this._getValue(e.substring(n,r))+"]"),a=!1,n=r+1):(r>n&&s.push(e.substring(n,r)),n=r+1,a="["===i);r>n&&s.push(e.substring(n,r));let o="l",p=[];if(s.forEach(e=>{"["===e[0]?o+=e:o+="."+e,p.push(o)}),1===p.length)return`${t}(${p[0]},null,l)`;const c=p.slice(0,-1);return`${t}(${p.join("&&")},${c.join("&&")},l)`}_getParams(e){let t="{";for(let s in e)t+=`${s}:${this._getParam(e[s])},`;return t+="}",t}_getReference(e){let t=this._getValue(e.tag,"u.d");return e.f?(e.f.forEach(e=>{t=`u.f.${e}(${t})`}),t):t}}}},t={};!function s(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,s),a.exports}(237)})();