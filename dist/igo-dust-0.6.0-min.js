(()=>{var t={93:(t,e,s)=>{const{isBrowser:r,isNode:i}=s(545),a=s(128),n=s(221),o=s(129).promises;t.exports.getFilePath=t=>r?(console.error("not implemented for browser"),""):(n.isAbsolute(t)||"."===t[0]||(t=`${a.views}/${t}`),n.resolve(t)),t.exports.loadFile=async t=>r?(console.error("not implemented for browser"),""):await o.readFile(t,"utf8")},128:t=>{t.exports=new class{constructor(){this.cache=!1,this.views="./views",this.htmlencode=!0,this.htmltrim=!0}configure(t){void 0!==t.views&&(this.views=t.views),void 0===t.cache&&void 0===t["view cache"]||(this.cache=!!(t.cache??t["view cache"])),["htmlencode","htmltrim"].forEach(e=>{void 0!==t[e]&&(this[e]=!!t[e])})}}},129:()=>{},140:(t,e,s)=>{const r=s(658),i=s(604),a=/[&<>"']/,n=/&/g,o=/</g,p=/>/g,h=/"/g,c=/'/g,l=/\\/g,u=/\//g,f=/\r/g,g=/\u2028/g,d=/\u2029/g,x=/\n/g,$=/\f/g,m=/'/g,b=/"/g,w=/\t/g,_={h:t=>t&&t.replace&&a.test(t)?t.replace(n,"&amp;").replace(o,"&lt;").replace(p,"&gt;").replace(h,"&quot;").replace(c,"&#39;"):t,j:t=>"string"==typeof t?t.replace(l,"\\\\").replace(u,"\\/").replace(b,'\\"').replace(m,"\\'").replace(f,"\\r").replace(g,"\\u2028").replace(d,"\\u2029").replace(x,"\\n").replace($,"\\f").replace(w,"\\t"):t,u:encodeURI,uc:encodeURIComponent,js:t=>t&&JSON.stringify(t).replace(g,"\\u2028").replace(d,"\\u2029").replace(o,"\\u003c"),jp:JSON.parse,uppercase:t=>t.toUpperCase(),lowercase:t=>t.toLowerCase()},y=async(t,e,s,r)=>{if(!y.helpers||!y.helpers[t])throw new Error(`Error: helper @${t} not found!`);return await y.helpers[t](e,s,r)};y.helpers=i,t.exports={a:t=>Array.isArray(t)?0===t.length?null:t:t?[t]:null,b:t=>!!t&&0!==t.length,v:(t,e,s)=>"function"==typeof t?t.call(e,s):t,d:(t,e,s)=>"function"==typeof t?t.call(e,s):null==t?"":t,h:y,f:_,i:async t=>(t.endsWith(".dust")||(t+=".dust"),await r.getCompiled(t))}},221:()=>{},237:(t,e,s)=>{const r=s(128),i=s(658),a=s(794),n=s(604),o=s(140);t.exports.configure=t=>{r.configure(t)},t.exports.compileFile=async t=>await i.getCompiled(t),t.exports.getSource=async t=>await i.getSource(t),t.exports.render=async(t,e,s=null)=>await(new a).render(t,e,s),t.exports.renderFile=async(t,e,s=null)=>await(new a).renderFile(t,e,s),t.exports.engine=async(e,s,r)=>{try{return r(null,await t.exports.renderFile(e,s))}catch(t){return r(t)}},t.exports.helpers=n,t.exports.filters=o.f},410:t=>{t.exports.cleanStr=t=>{const e=/["]*(.[^"]*)/.exec(t);return e&&e[1]},t.exports.removeComments=t=>{let e,s,r=0;const i=new RegExp("{!","msg"),a=new RegExp("!}","msg");for(;null!==(e=i.exec(t));)for(r=e.index+2,a.lastIndex=r;null!==(s=a.exec(t));){t=t.slice(0,e.index)+t.slice(s.index+2);break}return t},t.exports.stripDoubleQuotes=t=>{const e=new RegExp('"',"sg");return t.replace(e,"")},t.exports.parseTag=t=>{const e=t.indexOf(" ");return e>=0&&(t=t.substring(0,e)),t.substring(1)};const e=["'","{","["];t.exports.parseParams=t=>{const s={},r=t;let i;const a=new RegExp('(\\w+)=("[^"]*")',"msg");for(;null!==(i=a.exec(t));)s[i[1]]=i[2],t=t.substring(0,i.index)+t.substring(a.lastIndex),a.lastIndex=i.index;const n=new RegExp('(\\w+)=([^" \n\r]+)',"msg");for(;null!==(i=n.exec(t));){if(e.indexOf(i[2][0])>=0)throw new Error(`Unexpected character "${i[2][0]}" in tag {${r}...`);s[i[1]]=i[2],t=t.substring(0,i.index)+t.substring(n.lastIndex),n.lastIndex=i.index}return null!==(i=new RegExp('[^=] ?("[^"]*")',"msg").exec(t))&&(s.$=i[1]),s}},545:(t,e)=>{const s="undefined"!=typeof window&&void 0!==window.document,r="object"==typeof self&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,i="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node;t.exports={isBrowser:s,isWebWorker:r,isNode:i,isJsDom:()=>"undefined"!=typeof navigator&&("undefined"!=typeof window&&"nodejs"===window.name||navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"))}},604:t=>{const e=(t,e)=>(t,s)=>e(t.key,t.value);t.exports={eq:e(0,(t,e)=>t===e),ne:e(0,(t,e)=>t!==e),lt:e(0,(t,e)=>Number(t)<Number(e)),lte:e(0,(t,e)=>Number(t)<=Number(e)),gt:e(0,(t,e)=>Number(t)>Number(e)),gte:e(0,(t,e)=>Number(t)>=Number(e)),first:(t,e)=>0===e.$idx,last:(t,e)=>e.$length&&e.$length-1===e.$idx,sep:(t,e)=>e.$length&&e.$length-1!==e.$idx,select:()=>console.log("Error : @select not supported !")}},658:(t,e,s)=>{const r=s(93),i=s(813),a=s(869),n=s(128);t.exports=new class{constructor(){this._CACHE={}}async _getOrSet(t,e,s){const i=`${e}:${t=r.getFilePath(t)}`;if(n.cache&&this._CACHE[i])return this._CACHE[i];const a=await s(t);return n.cache&&(this._CACHE[i]=a),a}async _getParsed(t){return this._getOrSet(t,"parsed",async t=>{const e=await r.loadFile(t);return(new i).parse(e)})}async getCompiled(t){return this._getOrSet(t,"compiled",async t=>{const e=await this._getParsed(t);return(new a).compile(e)})}async getSource(t){return this._getOrSet(t,"source",async t=>{const e=await this._getParsed(t);return(new a).toSource(e)})}}},794:(t,e,s)=>{const r=s(140),i=s(658),a=s(813),n=s(869);t.exports=class{async render(t,e,s){const r=(new a).parse(t),i=(new n).compile(r);return await this.renderCompiled(i,e,s)}async renderFile(t,e,s){const r=await i.getCompiled(t);return await this.renderCompiled(r,e,s)}async renderCompiled(t,e,s){return await t(e,r,null,s)}}},807:t=>{const e=["else"],s={s:" ",n:"\\n",r:"\\r\\n",lb:"{",rb:"}"},r={"?":(t,e)=>{t.pushBlock(e),t.stackBlock(e)},"#":(t,e)=>{t.pushBlock(e),e.selfClosedTag||t.stackBlock(e)},"^":(t,e)=>{t.pushBlock(e),t.stackBlock(e)},"@":(t,e)=>{t.pushBlock(e),e.selfClosedTag||t.stackBlock(e)},":":(t,s)=>{if(-1===e.indexOf(s.tag))throw new Error(`Unexpected tag {${s.type}${s.tag}..`);t.addBody(s.tag)},"/":(t,e)=>{const s=t.pop();s&&">"!==s.type&&s.tag!==e.tag&&console.error(`Open/close tag mismatch! '${s.tag}' <> '${e.tag}'`)},">":(t,e)=>{e.file=e.params.$,t.pushBlock(e),e.selfClosedTag||t.stackBlock(e)},"<":(t,e)=>{t.pushBlock(e),t.stackBlock(e)},"+":(t,e)=>{t.pushBlock(e),e.selfClosedTag||t.stackBlock(e)},"~":(t,e)=>{s[e.tag]&&t.pushBlock(s[e.tag])}};t.exports=r},813:(t,e,s)=>{const r=s(410),i=s(807),a=s(128);class n{static OPEN_REGEXP=new RegExp("(.*?)\\{","msg");static CLOSE_REGEXP=new RegExp("(.*?)\\}","msg");constructor(){this.global=[],this.buffer=this.global,this.stack=[],this.contents={}}pushString(t){a.htmltrim&&(t=(t=(t=t.replace(/>\s*[\r\n]+\s*</g,"><")).replace(/\s*[\r\n]+\s*/g," ")).replace(/\\/g,"\\\\")),t=t.replace(/'/g,"\\'");const e=this.buffer.length-1,s=this.buffer[e];"string"!=typeof s?this.buffer.push(t):this.buffer[e]=s+t}pushBlock(t){this.buffer.push(t)}stackBlock(t){t.buffer=[],t.current=t.buffer,this.buffer=t.buffer,this.stack.push(t)}getLastBlock(){return this.stack[this.stack.length-1]}pop(){const t=this.stack.pop(),e=this.getLastBlock();return this.buffer=e&&e.current||this.global,t}addBody(t){const e=this.getLastBlock();if(!e)throw new Error("Cannot add body outside of a block");e.bodies=e.bodies||{},e.bodies[t]=[],e.current=e.bodies[t],this.buffer=e.bodies[t]}parse(t){a.htmltrim||(t=t.replace(/\r/g,"\\r").replace(/\n/g,"\\n")),t=r.removeComments(t),a.htmltrim&&(t=t.trim());const e=n.OPEN_REGEXP,s=n.CLOSE_REGEXP;e.lastIndex=0,s.lastIndex=0;let i,o,p=0;for(;null!==(i=e.exec(t));){i[1]&&this.pushString(i[1]),p=i.index+i[0].length;let r="";for(s.lastIndex=p;null!==(o=s.exec(t))&&(r+=o[1],-1!==o[1].lastIndexOf("{"));)r+="}";if(!o)throw new Error(`Missing closing "}" at index ${p}`);p=o.index+o[0].length,e.lastIndex=p,this.parseTag(r)||this.pushString(`{${r}}`)}if(this.stack.length>0)throw new Error(`Missing closing tag for {${this.stack[0].type}${this.stack[0].tag}...`);return p<t.length&&this.pushString(t.slice(p)),this.global}parseTag(t){const e=i[t[0]],s={type:t[0],tag:t};return e?(t.endsWith("/")&&(s.selfClosedTag=!0,t=t.substring(0,t.length-1)),s.tag=r.parseTag(t),s.params=r.parseParams(t),e(this,s),!0):!(t.indexOf(" ")>=0||t.indexOf("(")>=0||t.indexOf(";")>=0||(s.type="r",this.parseFilters(t,s),this.pushBlock(s),0))}parseFilters(t,e){const s=new RegExp("([ ]*\\|[ ]*\\w+)+","g").exec(t);if(s){e.tag=t.substring(0,s.index);const r=s[0].replace(/ /g,"").substring(1).split("|"),i=r.indexOf("s");i>-1?r.splice(i,1):a.htmlencode&&r.push("h"),e.f=r}else a.htmlencode&&(e.f=["h"])}}t.exports=n},869:(t,e,s)=>{const r=s(410),i=Object.getPrototypeOf(async function(){}).constructor;t.exports=class{constructor(){this.i=0,this.parts=[],this.parts.push("var r='',l=l||{},c=c||{ctx:[]};"),this.parts.push("var a=s?function(x){s.write(String(x))}:function(x){r+=x};")}compileBuffer(t){t.forEach(t=>{"<"===t.type&&(this.parts.push(`c._${t.tag}=async function(){var r='';`),this.parts.push("var a=s?function(x){s.write(String(x))}:function(x){r+=x};"),this.compileBuffer(t.buffer),this.parts.push("return r;};"))}),t.forEach(t=>{if("r"===t.type)this.parts.push(`a(${this._getReference(t)});`);else if("+"!==t.type||t.tag)if("+"===t.type)this.parts.push(`if(c._${t.tag}){a(await c._${t.tag}())}`),t.buffer&&(this.parts.push("else{"),this.compileBuffer(t.buffer),this.parts.push("}"));else if("?"===t.type||"^"===t.type){const e="^"===t.type?"!":"";this._pushContext(t.params),this.parts.push(`if(${e}u.b(${this._getValue(t.tag)})){`),this.compileBuffer(t.buffer),this.parts.push("}"),this._else(t),this._popContext(t.params)}else if("#"===t.type){this.i=this.i+1;const{i:e}=this;if(this._pushContext(t.params,!0),this.parts.push(`var a${e}=u.a(${this._getValue(t.tag)});`),this.parts.push(`if(a${e}){`),t.buffer){const s=t.params.it&&r.stripDoubleQuotes(t.params.it);this.parts.push(`l.$length=a${e}.length;`),this.parts.push(`for(var i${e}=0;i${e}<a${e}.length;i${e}++){`),s&&this.parts.push(`l.${s}=a${e}[i${e}];`),this.parts.push(`l._it=a${e}[i${e}];`),this.parts.push(`l.$idx=i${e};`),this.compileBuffer(t.buffer,!0),this.parts.push("}")}else this.parts.push(`a(a${e})`);this.parts.push("}"),this._else(t),this._popContext(t.params,!0)}else if("@"===t.type){this.i=this.i+1;const{i:e}=this;t.buffer&&(this.parts.push(`c._h_body${e}=async function(l_override){`),this.parts.push("var l_saved=l;"),this.parts.push("if(l_override){l={...l,...l_override};}"),this.parts.push("var r='';"),this.parts.push("var a=s?function(x){s.write(String(x))}:function(x){r+=x};"),this.compileBuffer(t.buffer),this.parts.push("l=l_saved;"),this.parts.push("return r;};"));const s=t.buffer?`c._h_body${e}`:"null";this.parts.push(`var h${e}=await u.h('${t.tag}',${this._getParams(t.params)},l,${s});`),t.buffer?(this.parts.push(`var h${e}_t=typeof h${e};`),this.parts.push(`if(h${e}_t==='string'||h${e}_t==='number'){a(h${e});}`),this.parts.push(`else if(h${e}){a(await c._h_body${e}());}`),this._else(t)):(this.parts.push(`if(h${e}!==null&&h${e}!==undefined){`),this.parts.push(`a(h${e});`),this.parts.push("}"),this._else(t))}else if(">"===t.type){t.buffer&&(this.parts.push("c._$body=async function(){var r='';"),this.parts.push("var a=s?function(x){s.write(String(x))}:function(x){r+=x};"),this.compileBuffer(t.buffer),this.parts.push("return r;};")),this._pushContext(t.params);const e=this._getParam(t.file);this.parts.push(`a(await (await u.i(${e}))(l,u,c,s));`),this._popContext(t.params)}else t.type||this.parts.push(`a('${t}');`);else this.parts.push("if(c._$body){a(await c._$body());c._$body=null;}")})}toSource(t){return this.compileBuffer(t),this.parts.push("return r;"),this.parts.join("")}compile(t){const e=this.toSource(t);return new i("l","u","c","s",e)}_else(t){t.bodies&&t.bodies.else&&(this.parts.push("else{"),this.compileBuffer(t.bodies.else),this.parts.push("}"))}_pushContext(t,e){const{i:s}=this;this.parts.push(`var ctx${s}={};`),Object.keys(t).forEach(e=>{"$"!==e&&(this.parts.push(`ctx${s}.${e}=l.${e};`),this.parts.push(`l.${e}=${this._getParam(t[e])};`))}),e&&(this.parts.push(`ctx${s}._it=l._it;`),this.parts.push(`ctx${s}.idx=l.$idx;`),this.parts.push(`ctx${s}.length=l.$length;`)),this.parts.push(`c.ctx.push(ctx${s});`)}_popContext(t,e){const{i:s}=this;this.parts.push(`var p_ctx${s}=c.ctx.pop();`),Object.keys(t).forEach(t=>{"$"!==t&&this.parts.push(`l.${t}=p_ctx${s}.${t};`)}),e&&(this.parts.push(`l._it=p_ctx${s}._it;`),this.parts.push(`l.$idx=p_ctx${s}.idx;`),this.parts.push(`l.$length=p_ctx${s}.length;`))}_addParamsToLocals(t){const{i:e}=this;Object.keys(t).forEach(s=>{"$"!==s&&(this.parts.push(`c.p_${s}${e}=l.${s};`),this.parts.push(`l.${s}=${this._getParam(t[s])};`))})}_cleanParamsFromLocals(t){const{i:e}=this;Object.keys(t).forEach(t=>{"$"!==t&&(this.parts.push(`l.${t}=c.p_${t}${e};`),this.parts.push(`delete c.p_${t}${e};`))})}_getParam(t){if('"'===t[0]){let e,s,i=[],a=0;if(!(t=r.stripDoubleQuotes(t)))return"''";const n=new RegExp("\\{([^\\}]*)\\}","msg");for(;null!==(e=n.exec(t));)s=t.substring(a,e.index).replace(/'/g,"\\'"),i.push(`'${s}'`),a=e.index+e[0].length,i.push(this._getValue(e[1],"u.d"));return a<t.length&&(s=t.substring(a,t.length),s=s.replace(/'/g,"\\'"),i.push(`'${s}'`)),i.join("+")}return isNaN(t)?this._getValue(t):t}_getValue(t,e="u.v"){if(!isNaN(t))return t;if("."===t)return"l._it";"."===t[0]&&(t="_it"+t);const s=[];let r,i,a=!1,n=0;for(r=0;r<t.length;r=1+r)i=t[r],a||"."!==i&&"["!==i?"]"===i&&(s.push("["+this._getValue(t.substring(n,r))+"]"),a=!1,n=r+1):(r>n&&s.push(t.substring(n,r)),n=r+1,a="["===i);r>n&&s.push(t.substring(n,r));let o="l",p=[];if(s.forEach(t=>{"["===t[0]?o+=t:o+="."+t,p.push(o)}),1===p.length)return`${e}(${p[0]},null,l)`;const h=p.slice(0,-1);return`${e}(${p.join("&&")},${h.join("&&")},l)`}_getParams(t){let e="{";for(let s in t)e+=`${s}:${this._getParam(t[s])},`;return e+="}",e}_getReference(t){let e=this._getValue(t.tag,"u.d");return t.f?(t.f.forEach(t=>{e=`u.f.${t}(${e})`}),e):e}}}},e={};!function s(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={exports:{}};return t[r](a,a.exports,s),a.exports}(237)})();